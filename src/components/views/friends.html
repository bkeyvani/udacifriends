<section class="well">
  <!-- TODO: replace with loading spinner -->
  <!--<div ng-hide="currentUser" class="sorry">-->
    <!--<h1>Sorry</h1>-->
    <!--<p>You need to be logged in to interact with your Udacifirends.</p>-->
    <!--<p>Please <a ng-href="#/register">Register</a>-->
      <!--or <a ng-href="#/login">Login</a></p>-->
  <!--</div>-->

  <div ng-show="currentUser" class="row">
    <h1 class="col-xs-12">Add Friends</h1>
    <form  class="col-xs-12" name="addFriendsForm" novalidate
      ng-submit="addFriend($scope.friendId)">
      <div class="form-group">
        <div class="input-group">
          <label for="search-friends" class="sr-only">Search for Udacifriends</label>
          <input type="text" placeholder="Search for Udacifriends ..."
            name="search-friend" class="form-control input-lg"
            ng-model="query" ng-required="true" ng-change="showDropDown()"
            ng-init="ddCtrl='true'">
          <span class="input-group-btn">
            <button class="btn btn-default btn-lg" type="submit"
              ng-disabled="addFriendsForm.$invalid">+</button>
          </span>
          <div class="searchresults"
            ng-show="query && ddCtrl">
            <ul>
              <li ng-repeat="user in users | filter:search"
                ng-click="addFriendById(this)">
                {{user.firstname}} {{user.lastname}}
              </li>
            </ul>
          </div><!-- searchresults -->
        </div><!-- input-group -->
      </div><!-- form-group -->
    </form>
  </div><!-- row -->
  <div class="row"
    ng-if="friendsCnt>0">
    <h2 class="col-xs-12">Your Friends</h2>
    <div class="col-xs-12 col-sm-6" ng-repeat="(key, friend) in friends">
      <div class="panel panel-default">
        <div class="panel-body">
          <h4 class="pull-left">{{friend.fullName}}</h4>
          <div class="list-group pull-right">
            <a class="list-group-item list-group-item-success"
              ng-click="newMessage(key)">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </a>
            <a class="list-group-item list-group-item-danger"
              ng-click="deleteFriend(key)">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </a>
          </div>
        </div>
      </div>
      <span class="text"></span>
    </div><!-- Friends List -->
  </div>
</section>
